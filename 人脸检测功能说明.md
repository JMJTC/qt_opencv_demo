# 人脸检测功能说明

## 功能概述

本项目已成功集成了完善的人脸检测功能，基于OpenCV的Haar级联分类器实现。

## 新增功能

### 1. 人脸检测滤镜

- 在滤镜选择下拉框中新增"人脸检测"选项
- 支持对图像和视频进行实时人脸检测
- 检测到的人脸会用绿色矩形框标出
- 显示检测到的人脸数量

### 2. 人脸检测参数调节

当选择"人脸检测"滤镜时，界面会显示参数调节面板，包括：

- **缩放因子** (1.01-2.0): 控制图像金字塔的缩放步长，值越小检测越精确但速度越慢
- **最小邻居数** (1-10): 控制人脸检测的严格程度，值越大检测越严格
- **最小尺寸** (10-200): 设置检测的最小人脸尺寸
- **最大尺寸** (50-500): 设置检测的最大人脸尺寸

### 3. 实时参数调节

- 参数调节会实时生效
- 对于图像模式，参数改变后立即重新处理图像
- 对于视频模式，参数改变后影响后续帧的处理

## 使用方法

1. **图像人脸检测**：
   - 点击"打开"按钮选择图像文件
   - 在滤镜下拉框中选择"人脸检测"
   - 调节检测参数以获得最佳效果
   - 检测结果会实时显示在图像上

2. **视频人脸检测**：
   - 点击"打开"按钮选择视频文件
   - 在滤镜下拉框中选择"人脸检测"
   - 点击"播放"开始视频播放
   - 调节检测参数，效果会应用到后续帧

## 技术实现

### 核心组件

- `FaceDetector` 类：封装OpenCV的Haar级联分类器
- `ImageProcessor` 类：集成人脸检测滤镜
- `MainWindow` 类：提供参数调节界面

### 检测算法

- 使用OpenCV的Haar级联分类器
- 基于Haar特征的机器学习方法
- 支持多尺度人脸检测
- 自动进行直方图均衡化以提升检测效果

### 性能优化

- 静态检测器实例，避免重复加载模型
- 参数可调节，平衡检测精度和性能
- 支持实时处理视频流

## 注意事项

1. **模型文件**：确保 `resources/models/haarcascade_frontalface_default.xml` 文件存在
2. **检测精度**：参数调节会影响检测精度和性能，需要根据实际场景调整
3. **光照条件**：人脸检测对光照条件敏感，建议在良好光照下使用
4. **人脸角度**：主要检测正面人脸，侧脸检测效果可能不佳

## 扩展建议

1. 可以添加更多人脸检测模型（如侧脸检测）
2. 可以集成更先进的深度学习人脸检测算法
3. 可以添加人脸识别功能
4. 可以添加人脸关键点检测功能
